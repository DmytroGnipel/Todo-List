(()=>{"use strict";const t={counterId:3,UntilNewYear:[{title:"Losing weight",dueDate:"16.11.2023",description:"in order to have better look on my birthday I want to lose 5 kg until its date",notes:"I want to lose wheigt by restrictings in my diet and conducting active excersises",isComplete:!1,priority:"green",id:0,nameProject:"UntilNewYear"},{title:"Learning songs",dueDate:"31.12.2023",description:'I want to perform at the New year"s party and because of that I have to learn at least 5 new songs',notes:"My favorite girl Sara very romatic, so I want learn Ed Sheerans songs about love",isComplete:!1,priority:"green",id:1,nameProject:"UntilNewYear"},{title:"Complete Todo List",dueDate:"15.09.2023",description:"This project from from theodinproject.com is a part of my long javascript journey",notes:"Day when I should finalize the project may be postponed. It depends on circumstances",isComplete:!1,priority:"green",id:2,nameProject:"UntilNewYear"}]},e=(()=>{let e;if(localStorage.getItem("KeeForTodoInStorage")){let t=localStorage.getItem("KeeForTodoInStorage");e=JSON.parse(t)}else e=t;return e})(),o=(t,o,n,c,a,r)=>(r||(r=e.counterId),e.counterId++,{title:t,dueDate:o,description:n,notes:c,priority:"green",isComplete:!1,id:r,nameProject:a}),n=(t,e)=>{e.push(t)},c=(t,o)=>{const n=e[o];for(const e of n)if(e.id==t)return e},a=(t,o)=>{const n=e[o],a=c(t,o),r=n.indexOf(a);n.splice(r,1)},r=(t,o,n)=>{const a=c(t,o),r=e[o].indexOf(a);e[o][r]=n},i=t=>{t.isComplete?t.isComplete=!1:t.isComplete=!0},s=(t,e)=>{t.priority=e},d=()=>{localStorage.setItem("KeeForTodoInStorage",JSON.stringify(e))};function l(){document.querySelector(".content").innerHTML="";const t=document.querySelector(".content");for(const o in e)if("counterId"!==o){const n=document.createElement("div");n.classList.add("projectDiv");const c=document.createElement("h4");c.textContent=o,n.append(c),t.append(n);const a=e[o];for(const t of a){const e=document.createElement("div");e.classList.add("todoDiv");const c=document.createElement("button");c.textContent="Edit todo",c.dataset.projectName=o,c.classList.add("editButton"),c.dataset.id=t.id;const a=document.createElement("button");a.textContent="Remove todo",a.classList.add("removeButton"),a.dataset.projectName=o,a.dataset.id=t.id;const r=t.isComplete;e.style.textDecoration=r?"line-through":"none",e.style.backgroundColor=t.priority;const i=document.createElement("select");i.dataset.projectName=o,i.dataset.id=t.id;const s=["Choose a priority","green","yellow","red"];for(let t=0;t<4;t++){const e=document.createElement("option");e.textContent=s[t],e.setAttribute("value",`${s[t]}`),i.append(e)}const d=document.createElement("label");d.textContent="complete",d.setAttribute("for","iScomplete");const l=document.createElement("input");l.setAttribute("type","checkbox"),l.setAttribute("id","iScomplete"),l.dataset.projectName=o,l.dataset.id=t.id,e.append(t.title," until ",t.dueDate,c,i,d,l,a),n.append(e)}const r=document.createElement("button");r.textContent="Add new task",r.classList.add("addTodoButton"),r.dataset.projectName=o,n.append(r)}}function u(){const t=document.querySelectorAll(".removeButton");for(const e of t)e.addEventListener("click",(function(){a(this.dataset.id,this.dataset.projectName),y()}))}function p(){const t=document.querySelectorAll(".addTodoButton");for(let c of t)c.addEventListener("click",(function(){const t=this.dataset.projectName;this.remove(),f(4);let c=["title","date","description","notes"];const a=document.querySelectorAll("input[type=text]");for(let t=0;t<4;t++)a[t].placeholder=`${c[t]}`;document.querySelector(".popUp button").addEventListener("click",(function(){let c=o(a[0].value,a[1].value,a[2].value,a[3].value,t);n(c,e[t]),y()}))}))}function m(){const t=document.querySelectorAll(".editButton");for(const e of t)e.addEventListener("click",(function(){f(4);const t=document.querySelectorAll("input[type=text]"),e=document.querySelectorAll(".popUp p"),n=c(this.dataset.id,this.dataset.projectName);let a=0;for(const o in n)"isComplete"!==o&&"priority"!==o&&"nameProject"!==o&&"id"!==o&&(e[a].textContent=o,t[a].value=n[o],a++);document.querySelector(".popUp button").addEventListener("click",(()=>{const e=o(t[0].value,t[1].value,t[2].value,t[3].value,this.dataset.projectName,this.dataset.id);r(this.dataset.id,this.dataset.projectName,e),y()}))}))}function f(t){const e=document.createElement("div");e.classList.add("popUp");const o=document.querySelector(".content"),n=document.createElement("button");n.textContent="accept";const c=document.createElement("a");c.href="#",c.textContent="X",c.classList.add="closeLink",e.append(c);for(let o=0;o<t;o++){const t=document.createElement("p"),o=document.createElement("input");o.type="text",e.append(t,o)}e.append(n),o.appendChild(e),c.addEventListener("click",(function(){e.remove()}))}function y(){l(),u(),p(),m(),h(),v(),d()}function h(){const t=document.querySelectorAll("input[type=checkbox]");for(const e of t)e.addEventListener("click",(function(){const t=c(this.dataset.id,this.dataset.projectName);i(t),y()}))}function v(){const t=document.querySelectorAll("select");for(const e of t)e.addEventListener("change",(function(){const t=c(this.dataset.id,this.dataset.projectName);s(t,`${this.value}`),y()}))}l(),u(),document.querySelector(".addProjectLink").addEventListener("click",(function(){f(1);const t=document.querySelector("input[type=text]");t.placeholder="enter a name for new project",document.querySelector(".popUp button").addEventListener("click",(function(){t.value?((t=>{const o=t[0];t.splice(0,1),e[o]=t})((t=>{const e=[];return e[0]=t,e})(t.value)),y()):alert("Your project must to have a name")}))})),p(),m(),h(),v()})();