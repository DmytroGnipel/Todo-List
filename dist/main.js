(()=>{"use strict";const t={UntilNewYear:[{title:"Losing weight",dueDate:"16.11.2023",description:"in order to have better look on my birthday I want to lose 5 kg until its date",notes:"I want to lose wheigt by restrictings in my diet and conducting active excersises",isComplete:!1,priority:"green",id:0,nameProject:"UntilNewYear"},{title:"Learning songs",dueDate:"31.12.2023",description:'I want to perform at the New year"s party and because of that I have to learn at least 5 new songs',notes:"My favorite girl Sara very romatic, so I want learn Ed Sheerans songs about love",isComplete:!1,priority:"green",id:1,nameProject:"UntilNewYear"},{title:"Complete Todo List",dueDate:"15.09.2023",description:"This project from from theodinproject.com is a part of my long javascript journey",notes:"Day when I should finalize the project may be postponed. It depends on circumstances",isComplete:!1,priority:"green",id:2,nameProject:"UntilNewYear"}]},e=(()=>{let e;if(localStorage.getItem("KeeForTodoInStorage")){let t=localStorage.getItem("KeeForTodoInStorage");e=JSON.parse(t)}else e=t;return e})(),o=(t,e,o,n,a,c)=>(c||(c=3),{title:t,dueDate:e,description:o,notes:n,priority:"green",isComplete:!1,id:c,nameProject:a}),n=(t,e)=>{e.push(t)},a=(t,o)=>{const n=e[o];for(const e of n)if(e.id==t)return e},c=(t,o)=>{const n=e[o],c=a(t,o),r=n.indexOf(c);n.splice(r,1)},r=(t,o,n)=>{e[t][o]=n},i=()=>{localStorage.setItem("KeeForTodoInStorage",JSON.stringify(e))};function s(){document.querySelector(".content").innerHTML="";const t=document.querySelector(".content");for(const o in e){const n=document.createElement("div");n.classList.add("projectDiv");const a=document.createElement("h4");a.textContent=o,n.append(a),t.append(n);const c=e[o];for(const t of c){const e=document.createElement("div");e.classList.add("todoDiv");const a=document.createElement("button");a.textContent="Edit todo",a.dataset.projectName=o,a.classList.add("editButton"),a.dataset.id=t.id;const c=document.createElement("button");c.textContent="Remove todo",c.classList.add("removeButton"),c.dataset.projectName=o,c.dataset.id=t.id;const r=t.isComplete;e.style.textDecoration=r?"line-through":"none",e.style.backgroundColor=t.priority;const i=document.createElement("select");i.dataset.projectName=o,i.dataset.id=t.id;const s=["Choose a priority","green","yellow","red"];for(let t=0;t<4;t++){const e=document.createElement("option");e.textContent=s[t],e.setAttribute("value",`${s[t]}`),i.append(e)}const d=document.createElement("label");d.textContent="complete",d.setAttribute("for","iScomplete");const l=document.createElement("input");l.setAttribute("type","checkbox"),l.setAttribute("id","iScomplete"),e.append(t.title," until ",t.dueDate,a,i,d,l,c),n.append(e)}const r=document.createElement("button");r.textContent="Add new task",r.classList.add("addTodoButton"),r.dataset.projectName=o,n.append(r)}}function d(){const t=document.querySelectorAll(".removeButton");for(const e of t)e.addEventListener("click",(function(){c(this.dataset.id,this.dataset.projectName),p()}))}function l(){const t=document.querySelectorAll(".addTodoButton");for(let a of t)a.addEventListener("click",(function(){const t=this.dataset.projectName;this.remove(),m(4);let a=["title","date","description","notes"];const c=document.querySelectorAll("input[type=text]");for(let t=0;t<4;t++)c[t].placeholder=`${a[t]}`;document.querySelector(".popUp button").addEventListener("click",(function(){let a=o(c[0].value,c[1].value,c[2].value,c[3].value,t);n(a,e[t]),p()}))}))}function u(){const t=document.querySelectorAll(".editButton");for(const e of t)e.addEventListener("click",(function(){m(4);const t=document.querySelectorAll("input[type=text]"),e=document.querySelectorAll(".popUp p"),n=a(this.dataset.id,this.dataset.projectName);let c=0;for(const o in n)"isComplete"!==o&&"priority"!==o&&"nameProject"!==o&&"id"!==o&&(e[c].textContent=o,t[c].value=n[o],c++);document.querySelector(".popUp button").addEventListener("click",(()=>{const e=o(t[0].value,t[1].value,t[2].value,t[3].value,this.dataset.projectName,this.dataset.id);r(this.dataset.projectName,this.dataset.id,e),p()}))}))}function m(t){const e=document.createElement("div");e.classList.add("popUp");const o=document.querySelector(".content"),n=document.createElement("button");n.textContent="accept";const a=document.createElement("a");a.href="#",a.textContent="X",a.classList.add="closeLink",e.append(a);for(let o=0;o<t;o++){const t=document.createElement("p"),o=document.createElement("input");o.type="text",e.append(t,o)}e.append(n),o.appendChild(e),a.addEventListener("click",(function(){e.remove()}))}function p(){s(),d(),l(),u()}s(),d(),document.querySelector(".addProjectLink").addEventListener("click",(function(){m(1);const t=document.querySelector("input[type=text]");t.placeholder="enter a name for new project",document.querySelector(".popUp button").addEventListener("click",(function(){t.value?((t=>{const o=t[0];t.splice(0,1),e[o]=t})((t=>{const e=[];return e[0]=t,e})(t.value)),p()):alert("Your project must to have a name")}))})),l(),u(),function(){const t=document.querySelectorAll("input[type=checkbox]");for(const o of t)o.addEventListener("click",(function(){let t=e[this.dataset.name][this.dataset.number];var o;(o=t).isComplete?o.isComplete=!1:o.isComplete=!0,i();const n=document.querySelector(`p[data-number='${this.dataset.number}'][data-name=${this.dataset.name}]`);t.isComplete?n.style.textDecoration="line-through":n.style.textDecoration="none"}))}(),function(){const t=document.querySelectorAll("select");for(const o of t)o.addEventListener("change",(function(){let t=e[this.dataset.name][this.dataset.number];var o,n;o=t,n=`${this.value}`,o.priority=n,document.querySelector(`p[data-number='${this.dataset.number}'][data-name=${this.dataset.name}]`).style.backgroundColor=t.priority,i()}))}()})();