(()=>{"use strict";const e={UntilNewYear:[{title:"Losing weight",date:"16.11.2023",description:"in order to have better look on my birthday I want to lose 5 kg until its date",notes:"I want to lose wheigt by restrictings in my diet and conducting active excersises",isComplete:!1,priority:"green"},{title:"Learning songs",date:"31.12.2023",description:'I want to perform at the New year"s party and because of that I have to learn at least 5 new songs',notes:"My favorite girl Sara very romatic, so I want learn Ed Sheerans songs about love",isComplete:!1,priority:"green"},{title:"Complete Todo List",date:"15.09.2023",description:"This project from from theodinproject.com is a part of my long javascript journey",notes:"Day when I should finalize the project may be postponed. It depends on circumstances",isComplete:!1,priority:"green"}]},t=(()=>{let t;if(localStorage.getItem("KeeForTodoInStorage")){let e=localStorage.getItem("KeeForTodoInStorage");t=JSON.parse(e)}else t=e;return t})(),o=(e,t,o,n)=>({title:e,date:t,description:o,notes:n,priority:"green",isComplete:!1,id:1,nameProject:""}),n=(e,t)=>{t.push(e)},a=(e,o)=>{t[o].splice(e,1)},r=(e,o,n)=>{t[e][o]=n},c=e=>{e.isComplete?e.isComplete=!1:e.isComplete=!0},i=(e,t)=>{e.priority=t},l=()=>{localStorage.setItem("KeeForTodoInStorage",JSON.stringify(t))};function s(){!function(){const e=document.querySelectorAll(".content div");for(const t of e)t.remove()}();const e=document.querySelector(".content");for(const o in t){const n=document.createElement("div");n.dataset.projectName=o,n.classList.add("projectDiv"),n.innerHTML=`<h4>${o}</h4>`;let a=-1;for(const e of t[o]){let t;t=e.isComplete?"line-through":"none",n.innerHTML+=`\n            <p style='background-color:${e.priority}; text-decoration: ${t}' data-number='${a+1}' data-name='${o}'>${e.title} until ${e.date}\n            <button data-number='${a+1}' data-name='${o}' class='editButton'>edit todo</button> \n            <button data-number='${a+1}' data-name='${o}' class='removeButton'>delete todo</button>\n            <label for='iScomplete'>complete</label>\n            <input type='checkbox' data-number='${a+1}' data-name='${o}' id='iScomplete'>\n            <select data-number='${a+1}' data-name='${o}'>\n            <option value="">Choose a priority</option>\n            <option value="green">green</option>\n            <option value="yellow">yellow</option>\n            <option value="red">red</option>\n            </select>\n            </p>\n            `,a++}e.appendChild(n);const r=document.createElement("button");r.textContent="Add todo to the project",r.classList.add("addTodoButton"),r.dataset.projectName=o,n.insertAdjacentElement("beforeend",r)}}function d(){const e=document.querySelectorAll(".removeButton");for(const t of e)t.addEventListener("click",(function(){a(this.dataset.number,this.dataset.name),f()}))}function u(){const e=document.querySelectorAll(".addTodoButton");for(let a of e)a.addEventListener("click",(function(){this.dataset.projectName,this.remove(),m(4);let e=["title","date","description","notes"];const r=document.querySelectorAll("input[type=text]");for(let t=0;t<4;t++)r[t].placeholder=`${e[t]}`;document.querySelector(".popUp button").addEventListener("click",(function(){for(const e of r)e.value||(e.value="");let e=o(r[0].value,r[1].value,r[2].value,r[3].value);n(e,t[a.dataset.projectName]),f(),console.log(t)}))}))}function p(){const e=document.querySelectorAll(".editButton");for(const n of e)n.addEventListener("click",(function(){m(4);const e=document.querySelectorAll("input[type=text]"),a=document.querySelectorAll(".popUp p"),c=t[n.dataset.name][n.dataset.number];let i=0;for(const t in c)"isComplete"!==t&&"priority"!==t&&(a[i].textContent=t,e[i].value=c[t],i++);document.querySelector(".popUp button").addEventListener("click",(function(){let t=o(e[0].value,e[1].value,e[2].value,e[3].value);r(n.dataset.name,n.dataset.number,t),f()}))}))}function m(e){const t=document.createElement("div");t.classList.add("popUp");const o=document.querySelector(".content"),n=document.createElement("button");n.textContent="accept";const a=document.createElement("a");a.href="#",a.textContent="X",a.classList.add="closeLink",t.append(a);for(let o=0;o<e;o++){const e=document.createElement("p"),o=document.createElement("input");o.type="text",t.append(e,o)}t.append(n),o.appendChild(t),a.addEventListener("click",(function(){t.remove()}))}function f(){s(),d(),p(),u(),y(),h(),l()}function y(){const e=document.querySelectorAll("input[type=checkbox]");for(const o of e)o.addEventListener("click",(function(){let e=t[this.dataset.name][this.dataset.number];c(e),l();const o=document.querySelector(`p[data-number='${this.dataset.number}'][data-name=${this.dataset.name}]`);e.isComplete?o.style.textDecoration="line-through":o.style.textDecoration="none"}))}function h(){const e=document.querySelectorAll("select");for(const o of e)o.addEventListener("change",(function(){let e=t[this.dataset.name][this.dataset.number];i(e,`${this.value}`),document.querySelector(`p[data-number='${this.dataset.number}'][data-name=${this.dataset.name}]`).style.backgroundColor=e.priority,l()}))}s(),d(),document.querySelector(".addProjectLink").addEventListener("click",(function(){m(1);const e=document.querySelector("input[type=text]");e.placeholder="enter a name of the new project",document.querySelector(".popUp button").addEventListener("click",(function(){e.value?((e=>{const o=e[0];e.splice(0,1),t[o]=e})((e=>{const t=[];return t[0]=e,t})(e.value)),f()):alert("Your project must to have a name")}))})),u(),p(),y(),h()})();