(()=>{"use strict";const e={UntilNewYear:[{title:"Losing weight",dueDate:"16.11.2023",description:"in order to have better look on my birthday I want to lose 5 kg until its date",notes:"I want to lose wheigt by restrictings in my diet and conducting active excersises",isComplete:!1,priority:"green",id:0,nameProject:"UntilNewYear"},{title:"Learning songs",dueDate:"31.12.2023",description:'I want to perform at the New year"s party and because of that I have to learn at least 5 new songs',notes:"My favorite girl Sara very romatic, so I want learn Ed Sheerans songs about love",isComplete:!1,priority:"green",id:1,nameProject:"UntilNewYear"},{title:"Complete Todo List",dueDate:"15.09.2023",description:"This project from from theodinproject.com is a part of my long javascript journey",notes:"Day when I should finalize the project may be postponed. It depends on circumstances",isComplete:!1,priority:"green",id:2,nameProject:"UntilNewYear"}]},t=(()=>{let t;if(localStorage.getItem("KeeForTodoInStorage")){let e=localStorage.getItem("KeeForTodoInStorage");t=JSON.parse(e)}else t=e;return t})(),o=(e,t,o,n,c)=>({title:e,dueDate:t,description:o,notes:n,priority:"green",isComplete:!1,id:3,nameProject:c}),n=(e,t)=>{t.push(e)},c=(e,o)=>{const n=t[o];for(const t of n)if(t.id==e){const e=t,o=n.indexOf(e);n.splice(o,1);break}},a=(e,o,n)=>{t[e][o]=n},r=()=>{localStorage.setItem("KeeForTodoInStorage",JSON.stringify(t))};function i(){document.querySelector(".content").innerHTML="";const e=document.querySelector(".content");for(const o in t){const n=document.createElement("div");n.classList.add("projectDiv");const c=document.createElement("h4");c.textContent=o,n.append(c),e.append(n);const a=t[o];for(const e of a){const t=document.createElement("div");t.classList.add("todoDiv");const c=document.createElement("button");c.textContent="Edit todo",c.dataset.projectName=o,c.dataset.id=e.id;const a=document.createElement("button");a.textContent="Remove todo",a.classList.add("removeButton"),a.dataset.projectName=o,a.dataset.id=e.id;const r=e.isComplete;t.style.textDecoration=r?"line-through":"none",t.style.backgroundColor=e.priority;const i=document.createElement("select");i.dataset.projectName=o,i.dataset.id=e.id;const s=["Choose a priority","green","yellow","red"];for(let e=0;e<4;e++){const t=document.createElement("option");t.textContent=s[e],t.setAttribute("value",`${s[e]}`),i.append(t)}const d=document.createElement("label");d.textContent="complete",d.setAttribute("for","iScomplete");const l=document.createElement("input");l.setAttribute("type","checkbox"),l.setAttribute("id","iScomplete"),t.append(e.title," until ",e.dueDate,c,i,d,l,a),n.append(t)}const r=document.createElement("button");r.textContent="Add new task",r.classList.add("addTodoButton"),r.dataset.projectName=o,n.append(r)}}function s(){const e=document.querySelectorAll(".removeButton");for(const t of e)t.addEventListener("click",(function(){c(this.dataset.id,this.dataset.projectName),u()}))}function d(){const e=document.querySelectorAll(".addTodoButton");for(let c of e)c.addEventListener("click",(function(){const e=this.dataset.projectName;this.remove(),l(4);let c=["title","date","description","notes"];const a=document.querySelectorAll("input[type=text]");for(let e=0;e<4;e++)a[e].placeholder=`${c[e]}`;document.querySelector(".popUp button").addEventListener("click",(function(){let c=o(a[0].value,a[1].value,a[2].value,a[3].value,e);n(c,t[e]),console.log(t),u()}))}))}function l(e){const t=document.createElement("div");t.classList.add("popUp");const o=document.querySelector(".content"),n=document.createElement("button");n.textContent="accept";const c=document.createElement("a");c.href="#",c.textContent="X",c.classList.add="closeLink",t.append(c);for(let o=0;o<e;o++){const e=document.createElement("p"),o=document.createElement("input");o.type="text",t.append(e,o)}t.append(n),o.appendChild(t),c.addEventListener("click",(function(){t.remove()}))}function u(){i(),s(),d()}i(),s(),document.querySelector(".addProjectLink").addEventListener("click",(function(){l(1);const e=document.querySelector("input[type=text]");e.placeholder="enter a name for new project",document.querySelector(".popUp button").addEventListener("click",(function(){e.value?((e=>{const o=e[0];e.splice(0,1),t[o]=e})((e=>{const t=[];return t[0]=e,t})(e.value)),u()):alert("Your project must to have a name")}))})),d(),function(){const e=document.querySelectorAll(".editButton");for(const n of e)n.addEventListener("click",(function(){l(4);const e=document.querySelectorAll("input[type=text]"),c=document.querySelectorAll(".popUp p"),r=t[n.dataset.name][n.dataset.number];let i=0;for(const t in r)"isComplete"!==t&&"priority"!==t&&(c[i].textContent=t,e[i].value=r[t],i++);document.querySelector(".popUp button").addEventListener("click",(function(){let t=o(e[0].value,e[1].value,e[2].value,e[3].value);a(n.dataset.name,n.dataset.number,t),u()}))}))}(),function(){const e=document.querySelectorAll("input[type=checkbox]");for(const o of e)o.addEventListener("click",(function(){let e=t[this.dataset.name][this.dataset.number];var o;(o=e).isComplete?o.isComplete=!1:o.isComplete=!0,r();const n=document.querySelector(`p[data-number='${this.dataset.number}'][data-name=${this.dataset.name}]`);e.isComplete?n.style.textDecoration="line-through":n.style.textDecoration="none"}))}(),function(){const e=document.querySelectorAll("select");for(const o of e)o.addEventListener("change",(function(){let e=t[this.dataset.name][this.dataset.number];var o,n;o=e,n=`${this.value}`,o.priority=n,document.querySelector(`p[data-number='${this.dataset.number}'][data-name=${this.dataset.name}]`).style.backgroundColor=e.priority,r()}))}()})();